<html>
	<body style="background-color:#ccc;">
		<p>
			<button onclick="append();" name="append">append</button>
			<button onclick="prepend();" name="prepend">prepend</button>
		</p>
		<div id="content" style="background-color:#fff">
			<div class="box size11" style="border:dashed 1px;">1x1</div>
		</div>
		<script src="js/jquery-1.10.2.min.js"></script>
		<script src="js/jquery.nested.js"></script>
		<script>
			settings = {
				gutter: 10,
				animate: true,
				animationOptions: {
						speed: 200,
						duration: 300,
						queue: true
				}
			};
			$("#content").nested(settings);

			function append(){
				$("#content").append(create_element());
				$("#content").nested(settings);
			}

			function prepend(){
				$("#content").prepend(create_element());
				$("#content").nested(settings);
			}

			function create_element(){
				var w = Math.floor(Math.random() * 3) + 1;
				var h = Math.floor(Math.random() * 3) + 1;
				return '<div class="box size' + w + h + '" style="border:dashed 1px;">' + w + 'x' + h + '</div>'
			}
		</script>
	</body>
</html>
